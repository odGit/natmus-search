(this["webpackJsonpnatmus-challenge"]=this["webpackJsonpnatmus-challenge"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),i=a.n(c),s=a(7),l=a(3),o=a(1);var u,m=function(e,t){switch(console.log("REDUCER",t),t.type){case"GET_SEARCH_START_REQUEST":return Object(o.a)({},e,{showSpinner:t.isLoading,showNoRes:!1,data:[]});case"GET_SEARCH_ITEMS":return Object(o.a)({},e,{data:t.payload,showSpinner:t.isLoading,showNoRes:!1,totalItems:t.totalItems,perPage:t.perPage,queryTerm:t.query});case"GOT_NO_SEARCH_RESULTS":return Object(o.a)({},e,{showSpinner:t.isLoading,showNoRes:!0,queryTerm:t.queryTerm});case"GET_IMG_ITEMS":return Object(o.a)({},e,{imgFiles:Object.assign({},e.imgFiles,Object(l.a)({},t.imgId,t.img)),imgAvailable:e.imgAvailable.concat(t.imgId)});case"CHANGE_PAGE":return Object(o.a)({},e,{offsetSize:e.offsetSize+t.nextPage*e.limit});case"SET_QUERY":return Object(o.a)({},e,{queryTerm:t.queryTerm});default:return e}};!function(e){e.OFFSET="offset",e.QUERY="query"}(u||(u={}));var E,d={data:[],limit:50,offsetSize:0,awaitingData:!1,errorMessage:null,perPage:0,totalItems:0,showSpinner:!1,showNoRes:!1,queryTerm:function(){var e=new URLSearchParams(window.location.search);return null!==e&&e.get(u.QUERY)?e.get(u.QUERY):null}(),imgFiles:{},imgAvailable:[]},p=Object(n.createContext)({state:d,dispatch:function(){}});function f(e){var t=Object(n.useReducer)(m,d),a=Object(s.a)(t,2),c=a[0],i=a[1];return r.a.createElement(p.Provider,Object.assign({value:{state:c,dispatch:i}},e))}function h(){var e=Object(n.useContext)(p);if(void 0===e)throw new Error("No provider for AppContext given");return e}!function(e){e.IMAGE='<rect x="3" y="3" width="18" height="18" rx="2" ry="2" /> <circle cx="8.5" cy="8.5" r="1.5" /><polyline points="21 15 16 10 5 21" />',e.FOLDER='<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />',e.DATABASE='<ellipse cx="12" cy="5" rx="9" ry="3" /><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" /><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" />',e.SEARCH='<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',e.SQUARE='<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',e.SQUARE_MINUS='<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',e.SQUARE_PLUS='<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',e.SQUARE_CHECK='<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',e.BOX='<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',e.BOOKMARK='<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',e.BACK='<polyline points="15 18 9 12 15 6"></polyline>',e.FORWARD='<polyline points="9 18 15 12 9 6">'}(E||(E={}));a(14);var v=function(e){var t=e.children,a=e.classes,n=e.isDisabled,c=e.onClickFn,i=e.type,s=void 0===i?"button":i;return r.a.createElement("button",{className:a,onClick:c,disabled:n,type:s},t)},y={display:"inline-block"};var g=function(e){var t=e.icon,a=e.color,n=void 0===a?"none":a,c=e.size;return r.a.createElement("svg",{dangerouslySetInnerHTML:{__html:t},style:y,width:c,height:c,viewBox:"0 0 24 24",fill:n,stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",preserveAspectRatio:"xMidYMid meet"})};a(15);var A=function(e){var t=e.icon,a=e.onClickFn,n=e.icon_size,c=e.isDisabled,i=e.classes,s=e.type;return r.a.createElement(v,{onClickFn:a,isDisabled:c,type:s,classes:"icon-button ".concat(i)},r.a.createElement(g,{icon:t,size:n}))},S=function(e){return{type:"GET_SEARCH_START_REQUEST",isLoading:e}},R=function(e,t,a,n,r){return{type:"GET_SEARCH_ITEMS",payload:e,isLoading:t,totalItems:a,perPage:n,query:r}},b=function(e,t){return{type:"GOT_NO_SEARCH_RESULTS",isLoading:e,queryTerm:t}},N=function(e,t){return{type:"GET_SEARCH_FAIL",isLoading:e,error:t}},T=function(e,t,a){return{type:"GET_IMG_START_REQUEST",isLoading:e,itemId:t,imgId:a}},O=function(e,t,a,n){return{type:"GET_IMG_ITEMS",isLoading:e,imgId:a,itemId:t,img:n}},C=function(e,t,a,n){return{type:"GET_IMG_FAIL",isLoading:e,itemId:t,imgId:a,error:n}},_=function(e){return{type:"CHANGE_PAGE",nextPage:e}};var I=function(){var e=Object(n.useRef)(null),t=h(),a=t.state,c=t.dispatch;function i(){if(null!==e.current){var t=e.current.value;0!==t.length&&c({type:"SET_QUERY",queryTerm:t})}}return Object(n.useEffect)((function(){null!==e.current&&null!==a.queryTerm&&"null"!==a.queryTerm&&(e.current.value=a.queryTerm)})),Object(n.useEffect)((function(){return window.addEventListener("keypress",(function(e){"Enter"===e.key&&i()})),function(){window.removeEventListener("keypress",(function(e){"Enter"===e.key&&i()}))}}),[]),r.a.createElement("div",{className:"search-form"},r.a.createElement("div",{className:"search-field"},r.a.createElement("input",{className:"search-input",type:"search",placeholder:"Search NatMus collection ...",ref:e}),r.a.createElement(A,{onClickFn:i,isDisabled:!1,icon:E.SEARCH,icon_size:"2em",classes:"search-svg"})))},w=a(2),x=a.n(w),M=a(4);function k(){return(k=Object(M.a)(x.a.mark((function e(t,a,n){var r,c,i,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://frontend.natmus.dk/api/Image?id=".concat(t),console.log("REQUEST URL:",r),n(T(!0,a,t)),e.prev=3,e.next=6,fetch(r);case 6:if(c=e.sent,console.log("REQUEST",c),c.ok){e.next=11;break}return i=new Error("IMAGE API req ".concat(c.status,": ").concat(c.statusText)),e.abrupt("return",n(C(!1,a,t,i)));case 11:return e.next=13,c.blob();case 13:return s=e.sent,e.abrupt("return",n(O(!1,a,t,s)));case 17:return e.prev=17,e.t0=e.catch(3),e.abrupt("return",n(C(!1,a,t,e.t0)));case 20:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}var L=function(e){var t=e.item,a=e.img_alt,n=e.img_src,c=e.classes,i=0!==n.length,s=h(),l=s.state,o=s.dispatch;return r.a.createElement("div",{className:c},l.imgAvailable.includes(n[0])&&i&&r.a.createElement("img",{src:URL.createObjectURL(l.imgFiles[n[0]]),alt:a}),r.a.createElement(A,{classes:"illustration icon-button",icon:E.IMAGE,isDisabled:!i,icon_size:"3em",onClickFn:function(){return function(e,t,a){return k.apply(this,arguments)}(n[0],t,o)}}))};var U=function(e){var t=e.classes,a=e.label,n=e.styles;return r.a.createElement("div",{className:t,style:n},a)};function z(e){var t={"\xe6":26,"\xf8":27,"\xe5":28,"\xc6":26,"\xd8":27,"\xc5":28};return Object.keys(t).includes(e)?t[e]:e.charCodeAt(0)-(e===e.toLowerCase()?97:65)}function D(e){return e/28*255}var j=function(e){var t=e.split(""),a=0,n=0,r=D(z(t[0]));return t.length>=2&&(a=D(z(t[1]))),t.length>=3&&(n=D(z(t[2]))),"rgb(".concat(Math.round(100*r)/100,", ").concat(Math.round(100*a)/100,", ").concat(Math.round(100*n)/100,")")};var G=function(e){var t=e.collection,a=e.classes;return r.a.createElement(U,{label:t.toLocaleUpperCase(),classes:a,styles:{backgroundColor:j(t)}})};a(17);var F,P=function(e){var t=e.name,a=e.value,n=e.classes;return r.a.createElement("div",{className:"listing-container ".concat(n)},r.a.createElement("span",{className:"listing-name"},t.toUpperCase()),r.a.createElement("span",{className:"listing-value"},Array.isArray(a)?a.join(" "):a))};!function(e){e.NO_DATA="No information",e.DESCRIPTION="DESCRIPTION:",e.COLOR="COLORS:",e.PROCESS="PROCESSING:",e.MEASURE="MEASUREMENTS:",e.MATERIAL="MATERIALS:"}(F||(F={}));var H=function(e){var t=e.materials,a=0!==t.length,n=q(t,"color"),c=q(t,"type"),i=q(t,"processing");return r.a.createElement("div",{className:"materials-wrapper"},a?r.a.createElement("div",null,0!==c.length&&r.a.createElement(P,{classes:"material-type",name:F.MATERIAL,value:c}),0!==n.length&&r.a.createElement(P,{classes:"material-color",name:F.COLOR,value:n}),0!==i.length&&r.a.createElement(P,{classes:"material-processing",name:F.PROCESS,value:i})):r.a.createElement(P,{classes:"material-type",name:F.MATERIAL,value:F.NO_DATA}))};function q(e,t){var a=e.filter((function(e){return e[t]})).map((function(e){return e[t]}));return a.filter((function(e,t){return a.indexOf(e)===t}))}a(18);var Q=function(e){var t=e.classes,a=e.icon,n=e.label;return r.a.createElement("div",{className:"icon-label ".concat(t)},r.a.createElement(g,{icon:a,size:"1.5em"}),r.a.createElement("span",null,n))};var B=function(e){var t=e.id_label,a=e.ident_label;return r.a.createElement("div",{className:"card-item-ids"},r.a.createElement(Q,{icon:E.DATABASE,label:t.toString(),classes:"card-ids id left"}),r.a.createElement(Q,{icon:E.FOLDER,label:a,classes:"card-ids identification right"}))};a(19);var K=function(e){var t=e.measurements,a=e.id,n=0!==t.length;return r.a.createElement("div",{className:"measurements-wrapper"},n?r.a.createElement("div",{className:"listing-container measurements-item"},r.a.createElement("span",{className:"listing-name"},F.MEASURE.toUpperCase()),t.map((function(e,t){return r.a.createElement("span",{className:"listing-value",key:"value-".concat(a,"-").concat(t)},Object.keys(e).map((function(n,c){return r.a.createElement("i",{key:"measurements-".concat(a,"-").concat(t,"-").concat(n,"-").concat(c)},"".concat(e[n]," "))})))}))):r.a.createElement(P,{classes:"measurements-item",name:F.MEASURE,value:F.NO_DATA}))};var Y=function(e){var t=e.descriptions;return null!==t&&0!==t.length?r.a.createElement(P,{classes:"card-description",name:F.DESCRIPTION,value:null===t||void 0===t?void 0:t.join(" ")}):r.a.createElement(P,{classes:"card-description",name:F.DESCRIPTION,value:F.NO_DATA})};var V=function(e){var t=e.item,a=(e.i,e.classes),n=t.id,c=t.collection,i=t.identification,s=t.title,l=t.descriptions,o=t.images,u=t.materials,m=t.measurements;return r.a.createElement("div",{className:"card ".concat(a)},r.a.createElement(L,{item:n,img_src:o,classes:"card-illustration"}),r.a.createElement(G,{collection:c,classes:"card-collection"}),r.a.createElement(U,{label:s?s.toLocaleUpperCase():"No Title",classes:"card-title"}),r.a.createElement(B,{id_label:n.toString(),ident_label:i}),r.a.createElement(Y,{descriptions:l}),r.a.createElement(H,{materials:u}),r.a.createElement(K,{id:n,measurements:m}))};a(20);var W=function(e){var t=e.resultData;return r.a.createElement("div",{className:"result-collection"},t.map((function(e,t){return r.a.createElement(V,{classes:"card",item:e,key:"item-".concat(t),i:t})})))},J=a(8);a(21);var X=function(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("ul",null,Object(J.a)(Array(20)).map((function(e,t){return r.a.createElement("li",{key:"spinner-item-".concat(t)})}))))};a(22),a(23);var Z=function(e){var t=e.term;return r.a.createElement("div",{className:"no-results-found"},r.a.createElement("div",{className:"no-results-text"},r.a.createElement("h2",null,r.a.createElement("em",null,'Sorry we could not find any results matching "'.concat(t,'"'))),r.a.createElement("ul",{className:"no-results-tips"},r.a.createElement("li",null,"Check your spelling and try again"),r.a.createElement("li",null,"Try a similar but a different search term, like photo instead of image"),r.a.createElement("li",null,"Keep your search term simple as our search works best with shorter descriptions"))),r.a.createElement("div",{className:"wrap"},r.a.createElement("i",{className:"fa-search search-1"},r.a.createElement(g,{icon:E.SEARCH,size:"2em"})),r.a.createElement("i",{className:"fa-search search-2"},r.a.createElement(g,{icon:E.SEARCH,size:"1.5em"})),r.a.createElement("i",{className:"fa-search search-3"},r.a.createElement(g,{icon:E.SEARCH,size:"1.5em"})),r.a.createElement("i",{className:"fa-search search-4"},r.a.createElement(g,{icon:E.SEARCH,size:"2em"})),r.a.createElement("div",{className:"items"},r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.BOOKMARK,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.BOX,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.DATABASE,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.FOLDER,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.IMAGE,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.SQUARE_CHECK,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.BOOKMARK,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.SEARCH,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.FOLDER,size:"1.2em"})),r.a.createElement("i",{className:"fa"},r.a.createElement(g,{icon:E.IMAGE,size:"1.2em"})))))};var $=function(){var e=h(),t=e.state,a=e.dispatch,n=t.offsetSize,c=t.limit,i=t.totalItems,s=t.perPage,l="".concat(1+n," - ").concat(Math.min(n+s,i)," of ").concat(i);return r.a.createElement("div",{className:"control-section-page"},r.a.createElement(A,{icon:E.BACK,onClickFn:function(){return a(_(-1))},isDisabled:0===n,icon_size:"2em",classes:"pagination-icon-button"}),r.a.createElement(U,{classes:"pages-label",label:l}),r.a.createElement(A,{icon:E.FORWARD,onClickFn:function(){return a(_(1))},isDisabled:Math.min(n+c,i)===i,icon_size:"2em",classes:"pagination-icon-button"}))};a(24);var ee=function(){return r.a.createElement("div",{className:"controls-bar"},r.a.createElement($,null))};function te(){return(te=Object(M.a)(x.a.mark((function e(t,a,n,r){var c,i,s,l,o,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="https://frontend.natmus.dk/api/Search?query=".concat(t,"&size=").concat(a,"&offset=").concat(n),r(S(!0)),e.prev=2,e.next=5,fetch(c);case 5:if((i=e.sent).ok){e.next=9;break}return s=new Error("SEARCH API req ".concat(i.status,": ").concat(i.statusText)),e.abrupt("return",r(N(!1,s)));case 9:return e.next=11,i.json();case 11:if(l=e.sent,o=Number(i.headers.get("Natmus-Total-Count")),u=Number(i.headers.get("Natmus-Page-Count")),0!==l.length){e.next=16;break}return e.abrupt("return",r(b(!1,t)));case 16:if(!(l.length>0)){e.next=18;break}return e.abrupt("return",r(R(l,!1,o,u,t)));case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(2),e.abrupt("return",r(N(!1,e.t0)));case 23:case"end":return e.stop()}}),e,null,[[2,20]])})))).apply(this,arguments)}var ae=function(e,t,a,n){r.a.useEffect((function(){null!=t&&"null"!==t&&function(e,t,a,n){te.apply(this,arguments)}(t,a,e,n)}),[e,a,t])};var ne=function(){var e,t,a=h(),n=a.state,c=a.dispatch,i=n.offsetSize,s=n.limit,l=n.queryTerm;return ae(i,l,s,c),e=i,t=l,r.a.useEffect((function(){window.history.pushState(null,"","".concat(window.location.pathname,"?").concat(u.QUERY,"=").concat(t,"&").concat(u.OFFSET,"=").concat(e))}),[e,t]),r.a.createElement("div",{className:"App container"},r.a.createElement(I,null),n.totalItems!==n.perPage&&r.a.createElement(ee,null),n.showSpinner&&r.a.createElement(X,null),n.data&&r.a.createElement(W,{resultData:n.data}),n.showNoRes&&r.a.createElement(Z,{term:n.queryTerm}))};i.a.render(r.a.createElement((function(){return r.a.createElement(f,null,r.a.createElement(ne,null))}),null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.62777bad.chunk.js.map